<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>P5_2</title>
    <script>
        if (document.location.search.match(/type=embed/gi)) {
            window.parent.postMessage("resize", "*");
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.js"></script>
    <script src='https://unpkg.com/ml5@latest/dist/ml5.min.js'></script>
</head>

<body translate="no">
    <h1>Graphics</h1>
    <div id="result"></div>
    <script type="text/javascript">
        let result = document.getElementById('result');
        function setup() {
            let canvas = createCanvas(720, 400);
            canvas.parent(result);
            stroke(255);
            noFill();
        }

        function draw() {
            background(102);
            fill(255);
            text(frameCount, 10, 20);   //  フレーム数表示

            push();
            translate(width * 0.2, height * 0.5);
            rotate(frameCount / 20.0);
            polygon(0, 0, 82, 3);
            pop();

            push();
            translate(width * 0.5, height * 0.5);
            rotate(frameCount / 50.0);
            star(0, 0, 80, 100, 20);
            pop();

            push();
            translate(width * 0.8, height * 0.5);
            rotate(frameCount / -100.0);
            polygon(0, 0, 70, 7);
            pop();
        }

        function polygon(x, y, radius, npoints) {
            let angle = TWO_PI / npoints;
            beginShape();
            for (let a = 0; a < TWO_PI; a += angle) {
                let sx = x + cos(a) * radius;
                let sy = y + sin(a) * radius;
                vertex(sx, sy);
            }
            endShape(CLOSE);
        }

        function star(x, y, radius1, radius2, npoints) {
            let angle = TWO_PI / npoints;
            let halfAngle = angle / 2.0;
            beginShape();
            for (let a = 0; a < TWO_PI; a += angle) {
                let sx = x + cos(a) * radius2;
                let sy = y + sin(a) * radius2;
                vertex(sx, sy);
                sx = x + cos(a + halfAngle) * radius1;
                sy = y + sin(a + halfAngle) * radius1;
                vertex(sx, sy);
            }
            endShape(CLOSE);
        }
    </script>
    <hr>
    <script src="https://gist.github.com/xtmh/895141285f59547ae31ed006f72aabbd.js"></script>
</body>

</html>
